<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservation Agreement Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
        }
        .document-font {
            font-family: 'Noto Serif', serif;
        }
        
        /* A4 Paper Simulation on Screen */
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            margin: 0 auto;
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            color: black;
            position: relative; /* Ensure absolute positioning works for footer */
        }

        /* Image Placeholder Styles */
        .img-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f3f4f6;
            border: 2px dashed #d1d5db;
            color: #6b7280;
            font-size: 0.6rem;
            text-align: center;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.2s;
        }
        .img-placeholder:hover {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        .hidden-input {
            display: none;
        }

        /* Print Styles - Critical for PDF Generation */
        @media print {
            body {
                background: white;
            }
            .no-print {
                display: none !important;
            }
            .a4-page {
                width: 100%;
                margin: 0;
                padding: 0;
                box-shadow: none;
                border: none;
                min-height: 297mm; /* Enforce height for footer placement */
                height: 297mm;
                position: relative;
            }
            .page-break {
                page-break-before: always;
            }
            /* Hide placeholder styling in print if image is missing, just show empty */
            .img-placeholder {
                border: none;
                background: transparent;
                color: transparent;
            }
            /* Ensure inputs look like text in print if we used them, but we are using spans */
            input, textarea {
                border: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col overflow-hidden">

    <!-- Header (No Print) -->
    <header class="bg-slate-800 text-white p-4 flex justify-between items-center shadow-md no-print z-10">
        <h1 class="text-xl font-bold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            Reservation Agreement Generator
        </h1>
        <button onclick="window.print()" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded shadow transition font-bold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z" clip-rule="evenodd" />
            </svg>
            Print / Save as PDF
        </button>
    </header>

    <!-- Main Content Area -->
    <div class="flex flex-1 overflow-hidden">
        
        <!-- Sidebar Form (No Print) -->
        <aside class="w-1/3 bg-white border-r border-gray-200 overflow-y-auto p-6 no-print shadow-inner z-0">
            <h2 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">Enter Details</h2>
            <form id="detailsForm" class="space-y-6">
                
                <!-- Section 1: Vendor -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">1. Vendor & Agent Details</h3>
                    
                    <div class="bg-blue-50 p-2 rounded border border-blue-100">
                        <label class="text-xs font-bold text-blue-800 uppercase mb-1 block">Vendor (Developer)</label>
                        <input type="text" data-bind="vendorName" placeholder="Organisation Name" class="w-full border rounded p-2 text-sm mb-1" value="Dynamik Construction Services Ltd">
                        <textarea data-bind="vendorAddress" placeholder="Vendor Address" rows="3" class="w-full border rounded p-2 text-sm mb-1">14, Village Way East Rayners Lane, Harrow, London HA2 7LU</textarea>
                        <input type="text" data-bind="vendorPhone" placeholder="Phone Number" class="w-full border rounded p-2 text-sm mb-1" value="+44 208 144 5553">
                        <input type="text" data-bind="vendorEmail" placeholder="Email" class="w-full border rounded p-2 text-sm" value="build@dynamikconstruction.com">
                    </div>

                    <div class="bg-green-50 p-2 rounded border border-green-100">
                        <label class="text-xs font-bold text-green-800 uppercase mb-1 block">Selling Agent</label>
                        <input type="text" data-bind="agentName" placeholder="Agent Name" class="w-full border rounded p-2 text-sm mb-1" value="Arlington Park East Ltd">
                        <textarea data-bind="agentAddress" placeholder="Agent Address" rows="3" class="w-full border rounded p-2 text-sm mb-1">25a Earlham Road, Norwich, NR2 3AD</textarea>
                        <input type="text" data-bind="agentPhone" placeholder="Agent Phone" class="w-full border rounded p-2 text-sm mb-1" value="01603 577255">
                        <input type="text" data-bind="agentEmail" placeholder="Agent Email" class="w-full border rounded p-2 text-sm" value="youragent@arlingtonpark.co.uk">
                    </div>
                </div>

                <!-- Section 2: Plot Details -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">2. Plot & Property</h3>
                    <input type="text" data-bind="devName" placeholder="Development Name" class="w-full border rounded p-2 text-sm" value="Norwich Oasis">
                    <div class="flex gap-2">
                        <input type="text" data-bind="plotNo" placeholder="Plot No" class="w-1/3 border rounded p-2 text-sm">
                        <input type="text" data-bind="houseType" placeholder="Dwelling Type" class="w-2/3 border rounded p-2 text-sm">
                    </div>
                    <textarea data-bind="plotAddress" placeholder="Plot Address" rows="2" class="w-full border rounded p-2 text-sm">Dereham Road, Norwich, Norfolk, NR2 3TL</textarea>
                    <input type="text" data-bind="garageDetails" placeholder="Garage/Parking Details" class="w-full border rounded p-2 text-sm">
                    <input type="text" data-bind="constructionStage" placeholder="Stage of Construction" class="w-full border rounded p-2 text-sm">
                </div>

                <!-- Section 3: Pricing & Dates -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">3. Pricing & Dates</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" data-bind="purchasePrice" placeholder="Purchase Price (£)" class="border rounded p-2 text-sm">
                        <input type="text" data-bind="resFee" placeholder="Reservation Fee (£)" class="border rounded p-2 text-sm" value="1500">
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="text-xs text-gray-500">Res. Date</label>
                            <input type="date" data-bind="resDate" class="w-full border rounded p-2 text-sm">
                        </div>
                        <div>
                            <label class="text-xs text-gray-500">Valid Until</label>
                            <input type="date" data-bind="validDate" class="w-full border rounded p-2 text-sm">
                        </div>
                    </div>
                    <div>
                        <label class="text-xs text-gray-500">Exchange Deadline</label>
                        <input type="date" data-bind="exchangeDate" class="w-full border rounded p-2 text-sm">
                    </div>
                    <input type="text" data-bind="completionEst" placeholder="Anticipated Completion (e.g. Spring 2025)" class="w-full border rounded p-2 text-sm">
                </div>

                <!-- Section 4: Tenure & Retention -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">4. Tenure & Costs</h3>
                    <select data-bind="tenureType" class="w-full border rounded p-2 text-sm">
                        <option value="Freehold">Freehold</option>
                        <option value="Leasehold">Leasehold</option>
                    </select>
                    <input type="text" data-bind="leaseTerms" placeholder="Lease Terms (Years/Start Date)" class="w-full border rounded p-2 text-sm">
                    <input type="text" data-bind="mgmtFee" placeholder="Est. Mgmt Fee (£)" class="w-full border rounded p-2 text-sm">
                    <div class="flex gap-2">
                        <input type="text" data-bind="retentionMin" placeholder="Retain Min (£)" class="w-1/2 border rounded p-2 text-sm" value="500">
                        <input type="text" data-bind="retentionMax" placeholder="Retain Max (£)" class="w-1/2 border rounded p-2 text-sm" value="1500">
                    </div>
                </div>

                <!-- Section 5: Buyer Details -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">5. Buyer Details</h3>
                    <h4 class="text-sm font-bold text-gray-600">Buyer 1</h4>
                    <input type="text" data-bind="buyer1Name" placeholder="Name" class="w-full border rounded p-2 text-sm">
                    <textarea data-bind="buyer1Address" placeholder="Address" rows="2" class="w-full border rounded p-2 text-sm"></textarea>
                    
                    <h4 class="text-sm font-bold text-gray-600 mt-2">Buyer 2</h4>
                    <input type="text" data-bind="buyer2Name" placeholder="Name" class="w-full border rounded p-2 text-sm">
                    <textarea data-bind="buyer2Address" placeholder="Address" rows="2" class="w-full border rounded p-2 text-sm"></textarea>
                </div>

                 <!-- Section 6: Advisors -->
                 <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">6. Solicitors & Advisors</h3>
                    
                    <!-- Vendor Solicitor -->
                    <div class="bg-gray-50 p-2 rounded border border-gray-200 mb-2">
                        <label class="text-xs font-bold text-gray-600 uppercase mb-1 block">Vendor's Solicitor</label>
                        <input type="text" data-bind="vendorSolName" placeholder="Firm Name" class="w-full border rounded p-2 text-sm mb-1">
                        <textarea data-bind="vendorSolAddress" placeholder="Address" rows="2" class="w-full border rounded p-2 text-sm mb-1"></textarea>
                        <div class="grid grid-cols-2 gap-1">
                            <input type="text" data-bind="vendorSolContact" placeholder="Contact Name" class="border rounded p-2 text-sm">
                            <input type="text" data-bind="vendorSolPhone" placeholder="Phone" class="border rounded p-2 text-sm">
                        </div>
                        <input type="text" data-bind="vendorSolEmail" placeholder="Email" class="w-full border rounded p-2 text-sm mt-1">
                    </div>

                    <!-- Buyer Solicitor -->
                    <div class="bg-gray-50 p-2 rounded border border-gray-200 mb-2">
                        <label class="text-xs font-bold text-gray-600 uppercase mb-1 block">Buyer's Solicitor</label>
                        <input type="text" data-bind="buyerSolName" placeholder="Firm Name" class="w-full border rounded p-2 text-sm mb-1">
                        <textarea data-bind="buyerSolAddress" placeholder="Address" rows="2" class="w-full border rounded p-2 text-sm mb-1"></textarea>
                        <div class="grid grid-cols-2 gap-1">
                            <input type="text" data-bind="buyerSolContact" placeholder="Contact Name" class="border rounded p-2 text-sm">
                            <input type="text" data-bind="buyerSolPhone" placeholder="Phone" class="border rounded p-2 text-sm">
                        </div>
                         <input type="text" data-bind="buyerSolEmail" placeholder="Email" class="w-full border rounded p-2 text-sm mt-1">
                    </div>

                    <input type="text" data-bind="mortgageProvider" placeholder="Mortgage Provider" class="w-full border rounded p-2 text-sm">
                    
                    <!-- Warranty Provider -->
                    <div class="bg-gray-50 p-2 rounded border border-gray-200 mt-2">
                        <label class="text-xs font-bold text-gray-600 uppercase mb-1 block">Warranty Provider</label>
                        <input type="text" data-bind="warrantyName" placeholder="Provider Name (e.g. NHBC)" class="w-full border rounded p-2 text-sm mb-1">
                    </div>
                </div>

                <!-- Section 7: Chain & Dependencies -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-blue-800">7. Chain & Dependencies</h3>
                    <select data-bind="buyerPosition" class="w-full border rounded p-2 text-sm">
                        <option value="">Select Buyer Position...</option>
                        <option value="First Time Buyer / No Chain">First Time Buyer / No Chain</option>
                        <option value="Subject to Sale (Sold STC)">Subject to Sale (Sold STC)</option>
                        <option value="Subject to Sale (Not Yet Sold)">Subject to Sale (Not Yet Sold)</option>
                        <option value="Cash Buyer">Cash Buyer</option>
                        <option value="Investor">Investor</option>
                        <option value="Part Exchange">Part Exchange</option>
                    </select>
                    <textarea data-bind="dependencyDetails" placeholder="Dependent Property Address & Agent Details" rows="3" class="w-full border rounded p-2 text-sm"></textarea>
                </div>

                 <!-- Section 8: Incentives -->
                 <div class="space-y-3">
                    <h3 class=" font-semibold text-blue-800">8. Incentives & Extras</h3>
                    <textarea data-bind="incentives" placeholder="List incentives included in price (e.g. Carpets, Legal Fees, Stamp Duty)..." rows="3" class="w-full border rounded p-2 text-sm"></textarea>
                </div>

            </form>
            <div class="mt-8 text-xs text-gray-400">
                Generated for Arlington Park.
            </div>
        </aside>

        <!-- Document Preview (Scrollable) -->
        <main class="flex-1 bg-gray-500 overflow-y-auto p-8 flex justify-center">
            
            <div id="printArea">
                <!-- PAGE 1 -->
                <div class="a4-page document-font relative text-sm leading-relaxed">
                    
                    <!-- Header -->
                    <div class="flex justify-between items-center border-b-2 border-gray-800 pb-4 mb-6">
                        <!-- Branding / Logo Area -->
                        <div class="flex items-center">
                             <!-- Direct Image Reference -->
                             <img src="Arlington-large.jpg" alt="Arlington Park" class="h-16 object-contain">
                        </div>

                        <div class="text-right">
                            <h1 class="text-xl font-bold uppercase tracking-wider">Reservation Agreement</h1>
                            <p class="italic text-xs mt-1">Subject to Contract / Missives being concluded</p>
                        </div>
                    </div>

                    <div class="mb-6 flex justify-between">
                        <div><strong>Date:</strong> <span class="resDate-text">[Date]</span></div>
                    </div>

                    <!-- 1. Vendor & Agent -->
                    <div class="mb-6">
                        <h2 class="text-base font-bold border-b border-gray-400 mb-2 uppercase">1. Vendor & Selling Agent</h2>
                        <div class="grid grid-cols-2 gap-8">
                            <!-- Vendor Column -->
                            <div class="pr-2 border-r border-gray-200">
                                <p class="text-xs font-bold uppercase text-gray-500 mb-1">Vendor (Developer)</p>
                                <p><strong>Name:</strong> <span class="vendorName-text">[Vendor Name]</span></p>
                                <p><strong>Address:</strong><br><span class="vendorAddress-text whitespace-pre-line">[Vendor Address]</span></p>
                                <p><strong>Tel:</strong> <span class="vendorPhone-text">[Phone]</span></p>
                                <p><strong>Email:</strong> <span class="vendorEmail-text">[Email]</span></p>
                            </div>
                            <!-- Agent Column -->
                            <div>
                                <p class="text-xs font-bold uppercase text-gray-500 mb-1">Selling Agent</p>
                                <p><strong>Name:</strong> <span class="agentName-text">[Agent Name]</span></p>
                                <p><strong>Address:</strong><br><span class="agentAddress-text whitespace-pre-line">[Agent Address]</span></p>
                                <p><strong>Tel:</strong> <span class="agentPhone-text">[Phone]</span></p>
                                <p><strong>Email:</strong> <span class="agentEmail-text">[Email]</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Plot Details -->
                    <div class="mb-6">
                        <h2 class="text-base font-bold border-b border-gray-400 mb-2 uppercase">2. Plot & Reservation Details</h2>
                        <div class="grid grid-cols-2 gap-x-8 gap-y-2">
                            <p><strong>Development:</strong> <span class="devName-text">[Dev Name]</span></p>
                            <p><strong>Plot No:</strong> <span class="plotNo-text">[No]</span></p>
                            <p class="col-span-2"><strong>Address:</strong> <span class="plotAddress-text">[Address]</span></p>
                            <p><strong>Dwelling Type:</strong> <span class="houseType-text">[Type]</span></p>
                            <p><strong>Garage/Parking:</strong> <span class="garageDetails-text">[Details]</span></p>
                            <p><strong>Stage:</strong> <span class="constructionStage-text">[Stage]</span></p>
                        </div>
                        
                        <div class="mt-4 bg-gray-50 p-2 border border-gray-200">
                            <h3 class="font-bold underline mb-1">Pricing & Dates</h3>
                            <div class="grid grid-cols-2 gap-x-8 gap-y-1">
                                <p><strong>Purchase Price:</strong> £<span class="purchasePrice-text">0.00</span></p>
                                <p><strong>Price Valid Until:</strong> <span class="validDate-text">[Date]</span></p>
                                <p><strong>Reservation Fee:</strong> £<span class="resFee-text">0.00</span></p>
                                <p><strong>Reservation Date:</strong> <span class="resDate-text">[Date]</span></p>
                                <p><strong>Valid Until:</strong> <span class="validDate-text">[Date]</span></p>
                                <p><strong>Exchange Deadline:</strong> <span class="exchangeDate-text">[Date]</span></p>
                                <p><strong>Anticipated Completion:</strong> <span class="completionEst-text">[Date]</span></p>
                            </div>
                            <div class="mt-2 text-xs border-t border-gray-300 pt-1">
                                <p class="font-bold text-gray-700">Fee Protection:</p>
                                <p class="italic">The Reservation Fee is held by <span class="agentName-text font-bold">...</span> in their Client Account protected by <strong>Propertymark CMP (C0135071)</strong>.</p>
                            </div>
                        </div>

                        <div class="mt-4">
                            <h3 class="font-bold underline mb-1">Tenure</h3>
                            <p><strong>Type:</strong> <span class="tenureType-text">[Type]</span></p>
                            <p><strong>Lease Terms:</strong> <span class="leaseTerms-text">[Terms]</span></p>
                            <p><strong>Est. Management Fee:</strong> £<span class="mgmtFee-text">0.00</span> per annum</p>
                            <p class="mt-2 text-xs italic border-l-2 border-black pl-2">
                                If the reservation is cancelled after 14 calendar days, the possible cost retention (administrative costs deducted from refund) will be between £<span class="retentionMin-text">...</span> and £<span class="retentionMax-text">...</span>.
                            </p>
                        </div>
                    </div>

                    <!-- 3. Buyer Details -->
                    <div class="mb-6">
                        <h2 class="text-base font-bold border-b border-gray-400 mb-2 uppercase">3. Buyer Details</h2>
                        <div class="grid grid-cols-2 gap-8">
                            <div>
                                <h3 class="font-bold text-sm underline">Buyer 1</h3>
                                <p><strong>Name:</strong> <span class="buyer1Name-text">[Name]</span></p>
                                <p><strong>Address:</strong> <span class="buyer1Address-text whitespace-pre-line">[Address]</span></p>
                            </div>
                            <div>
                                <h3 class="font-bold text-sm underline">Buyer 2</h3>
                                <p><strong>Name:</strong> <span class="buyer2Name-text">[Name]</span></p>
                                <p><strong>Address:</strong> <span class="buyer2Address-text whitespace-pre-line">[Address]</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Advisors -->
                    <div class="mb-4">
                        <h2 class="text-base font-bold border-b border-gray-400 mb-2 uppercase">4. Professional Advisors</h2>
                        
                        <div class="grid grid-cols-2 gap-6 mb-4">
                            <!-- Vendor Solicitor Col -->
                            <div class="text-xs">
                                <h3 class="font-bold text-sm underline mb-1">Vendor's Solicitor</h3>
                                <p><strong>Firm:</strong> <span class="vendorSolName-text">[Firm Name]</span></p>
                                <p><strong>Address:</strong><br><span class="vendorSolAddress-text whitespace-pre-line">[Address]</span></p>
                                <p><strong>Contact:</strong> <span class="vendorSolContact-text">[Name]</span></p>
                                <p><strong>Email:</strong> <span class="vendorSolEmail-text">[Email]</span></p>
                                <p><strong>Tel:</strong> <span class="vendorSolPhone-text">[Phone]</span></p>
                            </div>
                            
                            <!-- Buyer Solicitor Col -->
                            <div class="text-xs">
                                <h3 class="font-bold text-sm underline mb-1">Buyer's Solicitor</h3>
                                <p><strong>Firm:</strong> <span class="buyerSolName-text">[Firm Name]</span></p>
                                <p><strong>Address:</strong><br><span class="buyerSolAddress-text whitespace-pre-line">[Address]</span></p>
                                <p><strong>Contact:</strong> <span class="buyerSolContact-text">[Name]</span></p>
                                <p><strong>Email:</strong> <span class="buyerSolEmail-text">[Email]</span></p>
                                <p><strong>Tel:</strong> <span class="buyerSolPhone-text">[Phone]</span></p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-y-2 border-t border-gray-200 pt-2">
                            <p><strong>Mortgage Provider:</strong> <span class="mortgageProvider-text">[Details]</span></p>
                            <div>
                                <p><strong>Warranty Provider:</strong> <span class="warrantyName-text">[Name]</span></p>
                                <p class="text-xs italic">10 year warranty underwritten by Accelerant Insurance UK</p>
                            </div>
                        </div>
                    </div>
                    
                     <!-- Footer Logo Page 1 -->
                    <div class="absolute bottom-8 left-0 w-full flex justify-center items-center opacity-70">
                         <!-- Direct Image Reference -->
                         <img src="Arlington-large.jpg" class="h-8" alt="Arlington Park">
                    </div>

                    <!-- Lower Left Logo Page 1 -->
                    <div class="absolute bottom-8 left-8 flex justify-start items-center">
                         <img src="DYNAMIK.png" class="h-10 object-contain" alt="Dynamik Construction">
                    </div>
                    
                    <!-- Lower Right Logo Page 1 -->
                    <div class="absolute bottom-8 right-8 flex justify-end items-center">
                         <img src="Propertymark%20CMP%20logo%20(White)%20(small%20use%20variant).png" class="h-10 object-contain" alt="Propertymark CMP">
                    </div>
                </div>
                
                <div class="h-8 print:hidden"></div> <!-- Spacer for screen -->

                <!-- PAGE 2 (Force break in print) -->
                <div class="a4-page document-font relative text-sm leading-relaxed page-break">
                    
                    <!-- NEW SECTIONS: Chain & Incentives -->
                    <div class="mb-6">
                        <h2 class="text-base font-bold border-b border-gray-400 mb-4 uppercase">5. Chain Details & Incentives</h2>
                        
                        <div class="mb-4">
                             <p><strong>Buyer Position:</strong> <span class="buyerPosition-text text-black">[Status]</span></p>
                             <div class="mt-2 pl-4 border-l-2 border-gray-300">
                                 <p class="text-xs font-bold uppercase text-gray-500">Dependency Details (Agent / Property):</p>
                                 <p class="dependencyDetails-text whitespace-pre-line text-gray-700 italic">[None specified]</p>
                             </div>
                        </div>

                        <div>
                            <p><strong>Incentives / Extras included in Price:</strong></p>
                            <div class="mt-1 p-2 bg-gray-50 border border-gray-200 min-h-[3rem]">
                                <p class="incentives-text whitespace-pre-line">[None]</p>
                            </div>
                        </div>
                    </div>


                    <!-- 6. Conditions (Renumbered) -->
                    <div class="mb-6">
                        <h2 class="text-base font-bold border-b border-gray-400 mb-4 uppercase">6. Conditions Relating to this Reservation</h2>
                        
                        <!-- Terms of Reservation Content (Updated from previous turn) -->
                        <div class="text-xs space-y-2 text-justify">
                            <p><strong>1. Price Security:</strong> The Purchase Price listed on page one is fixed until the Reservation Expiry Date. By paying the Reservation Deposit, you secure the Plot at this price for that duration.</p>
                            <p><strong>2. The Reservation Deposit:</strong> If you proceed to exchange contracts, your Reservation Deposit is credited towards the final contract deposit. Until contracts are exchanged, the purchase is "subject to contract" (not legally binding).</p>
                            <p><strong>3. Timelines and Expiry:</strong>
                                <ul class="list-disc pl-4 mt-1">
                                    <li><strong>Completing the Agreement:</strong> If the Reservation Agreement is not signed on the date shown on page one, the official start date becomes the day it is actually completed (provided this is within 5 working days).</li>
                                    <li><strong>Holding the Plot:</strong> We will take the Plot off the market for a maximum of 5 working days while waiting for the Agreement to be completed.</li>
                                    <li><strong>Failure to Sign:</strong> If the Agreement is not completed within those 5 working days, the reservation lapses. You will receive a full refund of the Reservation Deposit, and neither party will have further obligations.</li>
                                    <li><strong>Exchange Deadline:</strong> Contracts must be exchanged by the Reservation Expiry Date. This date can be extended by mutual agreement.</li>
                                    <li><strong>Failure to Exchange:</strong> If contracts are not exchanged by the Expiry Date (or agreed extension), the Agreement expires without notice. We will refund your deposit, minus incurred costs.</li>
                                </ul>
                            </p>
                            <p><strong>4. Purchase Expenses:</strong> You are responsible for your own legal and purchase costs unless explicitly agreed otherwise.</p>
                            <p><strong>5. Property Modifications:</strong> We are not bound by initial development plans. However, we will notify you if a "Major Change" occurs after you reserve the Plot. A Major Change is defined as an alteration affecting the internal layout, size, appearance, or value.</p>
                            <p><strong>6. Financial Advice:</strong> We are not authorised to provide financial investment advice. You must obtain your own independent advice, though we can recommend a New Homes Mortgage Advisor if requested.</p>
                            
                            <p><strong>7. Cancellation Rights and Costs:</strong> You may cancel the reservation at any time before the Reservation Expiry Date by writing to the Arlington Park offices. Refunds are handled as follows:
                                <ul class="list-disc pl-4 mt-1">
                                    <li><strong>14-Day Cooling-Off Period:</strong> If you cancel within 14 days of reservation, you receive a full refund.</li>
                                    <li><strong>Major Changes:</strong> If we notify you of a Major Change that is unacceptable to you, you may cancel within 14 days of that notification and receive a full refund.</li>
                                    <li><strong>After the Cooling-Off Period:</strong> If you cancel after 14 days (and not due to a Major Change), we will refund your deposit minus the following reasonable costs:
                                        <ul class="list-none pl-2 mt-1 italic">
                                            <li>- £50: Administration and management contribution.</li>
                                            <li>- Up to £100: Legal costs (if solicitors were instructed).</li>
                                            <li>- Up to £250: Legal costs for part exchange (if the process had started).</li>
                                            <li>- £100: Contribution towards the Energy Performance Certificate (if commissioned).</li>
                                        </ul>
                                    </li>
                                </ul>
                            </p>
                            
                            <p><strong>8. Verbal Promises:</strong> If you are relying on any spoken statements made to you, you must notify both us and your legal advisor in writing before exchanging contracts.</p>
                            <p><strong>9. Delays and Termination:</strong> Construction may be delayed by factors outside our control (such as weather or supply shortages). However, the Contract of Sale outlines your rights to terminate the agreement if there is an "unreasonable delay" in construction or if a Major Change occurs.</p>
                            <p><strong>10. Data Protection:</strong> The Buyer consents to the Reservation Agreement information being used by the Vendor and Selling Agent to progress the purchase, and for use in customer surveys. All such information will be applied in accordance with the Data Protection Act 2018.</p>
                        </div>
                    </div>

                    <!-- NEW CONFIRMATION TEXT -->
                    <div class="mb-6 p-4 bg-blue-50 border border-blue-200 text-justify text-xs">
                        <p class="mb-2"><strong>By signing this document and initialling the attachments, both the Home Buyer and Home Builder confirm that the information provided here accurately describes the property. This document replaces any previous conversations, brochures or written descriptions.</strong></p>
                        <p class="mb-2">Our goal is to ensure the Buyer has a clear understanding of the property and a written record of the Builder's commitments. If there are any concerns about the property description, please write them in the space below so the Builder can clarify them. This must be done no later than when contracts are exchanged.</p>
                        
                        <div class="mt-4">
                            <p class="font-bold underline mb-1">Notes:</p>
                            <div class="border border-gray-400 bg-white p-2 h-24"></div>
                        </div>
                    </div>

                    <!-- 7. Declarations -->
                    <div class="mb-8 bg-gray-50 border border-gray-200 p-4">
                        <h2 class="text-base font-bold uppercase mb-2">7. Declarations</h2>
                        <ul class="list-disc pl-5 space-y-1 mb-6">
                            <li>We have read, understood, and accept the conditions detailed on this Reservation Agreement.</li>
                            <li>We have received/read the information and details listed in the Summary Checklist attached at Appendix 1.</li>
                        </ul>

                        <div class="grid grid-cols-2 gap-10 mt-8">
                            <div>
                                <div class="border-b border-black h-8 mb-1"></div>
                                <p class="text-xs font-bold uppercase">Signed (Buyer 1)</p>
                            </div>
                            <div>
                                <div class="border-b border-black h-8 mb-1"></div>
                                <p class="text-xs font-bold uppercase">Date</p>
                            </div>
                            <div>
                                <div class="border-b border-black h-8 mb-1"></div>
                                <p class="text-xs font-bold uppercase">Signed (Buyer 2)</p>
                            </div>
                            <div>
                                <div class="border-b border-black h-8 mb-1"></div>
                                <p class="text-xs font-bold uppercase">Date</p>
                            </div>
                             <div>
                                <div class="border-b border-black h-8 mb-1"></div>
                                <p class="text-xs font-bold uppercase">Signed (Vendor / Agent Rep)</p>
                            </div>
                            <div>
                                <div class="border-b border-black h-8 mb-1"></div>
                                <p class="text-xs font-bold uppercase">Date</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Obvious Warning Box -->
                    <div class="mt-6 border-2 border-black bg-gray-50 p-4 text-center">
                        <p class="font-bold text-sm uppercase">This is a legal agreement; if in any doubt as to its meaning or effect, the buyer should seek legal advice before signing it.</p>
                    </div>
                
                    <div class="border-t-2 border-black mt-8 pt-4">
                        <h2 class="text-base font-bold uppercase mb-4">Appendix 1: Information Pack Summary Checklist</h2>
                        <p class="mb-4"><strong>Development:</strong> <span class="devName-text">[Name]</span> | <strong>Plot:</strong> <span class="plotNo-text">[No]</span></p>
                        
                        <p class="text-xs italic mb-2">By initialling below, the Buyer confirms receipt/explanation of the following:</p>

                        <table class="w-full text-xs border-collapse border border-gray-300">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="border border-gray-300 p-2 text-left">Document / Information Provided</th>
                                    <th class="border border-gray-300 p-2 w-20 text-center">Initials</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td class="border p-2"><strong>Reservation Agreement:</strong> Full terms, conditions, and expiry date explained.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Property Details:</strong> Site plan, plot boundary, and internal layout/floor plans.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Specification:</strong> List of fixtures, fittings, and contents included in the price.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Tenure & Costs:</strong> Tenure type (Freehold/Leasehold) and estimated management fees.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Warranty:</strong> Details of the Warranty Provider and scope of cover.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Health & Safety:</strong> Site safety rules and requirements for visiting the development.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Cancellation Rights:</strong> Explanation of the cooling-off period and retention costs.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Complaints Procedure:</strong> Copy of the Builder's/Agent's process for handling complaints.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Professional Advice:</strong> Recommendation to appoint a legal advisor and mortgage specialist.</td><td class="border"></td></tr>
                                <tr><td class="border p-2"><strong>Completion:</strong> Estimated timeline for build completion and handover.</td><td class="border"></td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                     <!-- Footer Logo Page 2 -->
                    <div class="absolute bottom-8 left-0 w-full flex justify-center items-center opacity-70">
                         <img src="Arlington-large.jpg" class="h-8" alt="Arlington Park">
                    </div>

                    <!-- Lower Left Logo Page 2 -->
                    <div class="absolute bottom-8 left-8 flex justify-start items-center">
                         <img src="DYNAMIK.png" class="h-10 object-contain" alt="Dynamik Construction">
                    </div>
                    
                    <!-- Lower Right Logo Page 2 -->
                    <div class="absolute bottom-8 right-8 flex justify-end items-center">
                         <img src="Propertymark%20CMP%20logo%20(White)%20(small%20use%20variant).png" class="h-10 object-contain" alt="Propertymark CMP">
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        // Simple data binding script
        document.addEventListener('DOMContentLoaded', () => {
            const formInputs = document.querySelectorAll('input[data-bind], textarea[data-bind], select[data-bind]');

            function updatePreview(input) {
                const key = input.getAttribute('data-bind');
                const value = input.value;
                const targets = document.querySelectorAll(`.${key}-text`);
                
                targets.forEach(target => {
                    // Maintain placeholder if empty
                    if (!value) {
                        target.classList.add('text-gray-400');
                        // Don't show text [placeholder] for concerns if empty, just keep box empty
                        if(key !== 'incentives' && key !== 'dependencyDetails') {
                            target.innerText = `[${key}]`;
                        } else {
                            target.innerText = '';
                        }
                    } else {
                        target.classList.remove('text-gray-400');
                        
                        // Check if input is a date type for better formatting
                        if (input.type === 'date') {
                             // Create date object (Append time to ensure local date is respected)
                             const dateObj = new Date(value + 'T12:00:00');
                             if (!isNaN(dateObj.getTime())) {
                                 // Format to UK English (e.g., 28 October 2025)
                                 target.innerText = new Intl.DateTimeFormat('en-GB', { 
                                     day: 'numeric', month: 'long', year: 'numeric' 
                                 }).format(dateObj);
                             } else {
                                 target.innerText = value;
                             }
                        } else {
                            target.innerText = value;
                        }
                    }
                });
            }

            // Initialize listeners
            formInputs.forEach(input => {
                input.addEventListener('input', () => updatePreview(input));
                updatePreview(input);
            });

            // ------------------------------------------------------------------
            // LOGIC: Automatically Calculate Exchange Deadline (+6 Weeks)
            // ------------------------------------------------------------------
            const resDateInput = document.querySelector('input[data-bind="resDate"]');
            const exchangeDateInput = document.querySelector('input[data-bind="exchangeDate"]');

            if (resDateInput && exchangeDateInput) {
                resDateInput.addEventListener('change', () => {
                    if (resDateInput.value) {
                        // Create date object from input (YYYY-MM-DD)
                        // Append T12:00:00 to avoid timezone rolling the date back
                        const startDate = new Date(resDateInput.value + 'T12:00:00');
                        
                        // Add 42 days (6 weeks)
                        startDate.setDate(startDate.getDate() + 42);
                        
                        // Format back to YYYY-MM-DD for the input value
                        const year = startDate.getFullYear();
                        const month = String(startDate.getMonth() + 1).padStart(2, '0');
                        const day = String(startDate.getDate()).padStart(2, '0');
                        
                        exchangeDateInput.value = `${year}-${month}-${day}`;
                        
                        // Trigger updatePreview for the calculated field
                        exchangeDateInput.dispatchEvent(new Event('input'));
                    }
                });
            }
        });
    </script>
</body>
</html>
